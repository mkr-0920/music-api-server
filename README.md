
---

# ğŸµ Music API Server â€” å¤šæºèšåˆéŸ³ä¹ API æœåŠ¡

> ä¸€ä¸ªé›†æˆæœ¬åœ°ã€QQéŸ³ä¹ä¸ç½‘æ˜“äº‘éŸ³ä¹çš„ç§æœ‰åŒ–ç»Ÿä¸€ API æœåŠ¡å™¨ã€‚æ”¯æŒæ™ºèƒ½æœç´¢ã€è‡ªåŠ¨ä¸‹è½½ã€Cookie ç»­æœŸã€å¯†é’¥ä¿æŠ¤ï¼Œä¸ºå‰ç«¯æˆ–æ’­æ”¾å™¨æä¾›æ ‡å‡†åŒ–éŸ³ä¹æ•°æ®æ¥å£ã€‚

---

## âœ¨ æ ¸å¿ƒç‰¹æ€§

- **å¤šæºèšåˆ**  
  åŒæ—¶æ”¯æŒæœ¬åœ°éŸ³ä¹åº“ã€QQéŸ³ä¹ã€ç½‘æ˜“äº‘éŸ³ä¹ä¸‰å¤§æ¥æºã€‚

- **æ™ºèƒ½æœç´¢**  
  æ”¯æŒæŒ‰ `æ­Œæ‰‹ - æ­Œæ›²å` æ¨¡ç³Šæœç´¢ï¼Œå¯é™„åŠ  `ä¸“è¾‘å` ç²¾ç¡®è¿‡æ»¤ã€‚

- **è‡ªåŠ¨ä¸‹è½½ & å…¥åº“**  
  åœ¨çº¿å¹³å°æœç´¢æ—¶ï¼Œè‡ªåŠ¨ä¸‹è½½æœ€é«˜éŸ³è´¨ç‰ˆæœ¬è‡³æœ¬åœ°ç›®å½•ï¼Œå¹¶å†™å…¥å…ƒæ•°æ®ã€‚

- **Cookie è‡ªåŠ¨ç»­æœŸ**  
  å†…ç½®å®šæ—¶ä»»åŠ¡è‡ªåŠ¨åˆ·æ–° QQ éŸ³ä¹ Cookieï¼Œä¸€æ¬¡é…ç½®ï¼Œé•¿æœŸæœ‰æ•ˆã€‚

- **ç»Ÿä¸€å“åº”ç»“æ„**  
  æ— è®ºæ•°æ®æ¥è‡ªå“ªä¸ªå¹³å°ï¼Œå‡è¿”å›ä¸€è‡´çš„ JSON æ ¼å¼ï¼Œä¾¿äºå‰ç«¯è°ƒç”¨ã€‚

- **API å¯†é’¥ä¿æŠ¤**  
  æ¥å£é€šè¿‡ `X-API-Key` è¯·æ±‚å¤´è®¤è¯ï¼Œä¿éšœç§æœ‰æœåŠ¡å®‰å…¨ã€‚

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/mkr-0920/music-api-server.git
cd music-api-server
```

---

### 2. é…ç½®ç¯å¢ƒ

#### å¤åˆ¶é…ç½®æ¨¡æ¿ï¼š

```bash
cp core/config.py.template core/config.py
```

#### ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼š

```bash
nano core/config.py
```

è¯·åŠ¡å¿…å¡«å†™ä»¥ä¸‹å…³é”®é…ç½®é¡¹ï¼š

| é…ç½®é¡¹             | è¯´æ˜                         |
|--------------------|------------------------------|
| `API_SECRET_KEY`   | ç”¨äº API è®¤è¯çš„å¯†é’¥           |
| `QQ_USER_CONFIG`  | QQéŸ³ä¹ç›¸å…³é…ç½® |
| `NETEASE_COOKIE_STR`   | ç½‘æ˜“äº‘éŸ³ä¹ Cookies     |
| `MUSIC_DIRECTORY`  | æœ¬åœ°éŸ³ä¹æ–‡ä»¶å­˜å‚¨è·¯å¾„          |

> ğŸ’¡ å»ºè®®ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒéš”ç¦»ä¾èµ–ï¼ˆè§ä¸‹ä¸€æ­¥ï¼‰

---

### 3. å®‰è£…ä¾èµ–ï¼ˆæ¨èè™šæ‹Ÿç¯å¢ƒï¼‰

```bash
# åˆ›å»ºå¹¶æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
python3 -m venv venv
source venv/bin/activate  # Linux/macOS
# venv\Scripts\activate   # Windows

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

---

### 4. å¯åŠ¨æœåŠ¡

```bash
python main.py
```

âœ… æœåŠ¡å¯åŠ¨åï¼Œé»˜è®¤ç›‘å¬åœ°å€ï¼š  
ğŸ‘‰ `http://0.0.0.0:5000`

---

## ğŸ“– API ä½¿ç”¨è¯´æ˜

æ‰€æœ‰è¯·æ±‚ **å¿…é¡»æºå¸¦è®¤è¯å¤´**ï¼š

```http
X-API-Key: YOUR_SECRET_KEY
```

---

### 1. æœ¬åœ°éŸ³ä¹æœç´¢ `/api/local/search`

**æ–¹æ³•**ï¼š`GET`  
**æè¿°**ï¼šåœ¨æœ¬åœ°éŸ³ä¹åº“ä¸­æœç´¢åŒ¹é…çš„æ­Œæ›²ã€‚

#### å‚æ•°ï¼š

| å‚æ•°     | å¿…éœ€ | è¯´æ˜                     |
|----------|------|--------------------------|
| `q`      | âœ…   | æœç´¢å…³é”®è¯ï¼Œæ ¼å¼ï¼š`æ­Œæ‰‹ - æ­Œæ›²å` |
| `album`  | âŒ   | ä¸“è¾‘åç§°ï¼Œç”¨äºç²¾ç¡®åŒ¹é…     |
| `quality`| âŒ   | éŸ³è´¨è¿‡æ»¤ï¼ˆå¦‚ï¼šlosslessï¼‰   |

#### ç¤ºä¾‹ï¼š

```bash
curl -G -H "X-API-Key: YOUR_SECRET_KEY" \
  --data-urlencode "q=å‘¨æ°ä¼¦ - æ¢¯ç”°" \
  --data-urlencode "album=å¶æƒ ç¾" \
  "http://127.0.0.1:5000/api/local/search"
```

---

### 2. QQéŸ³ä¹æœç´¢ `/api/qq`

**æ–¹æ³•**ï¼š`GET`  
**æè¿°**ï¼šé€šè¿‡æ­Œæ›² MID æˆ–å…³é”®è¯æœç´¢ QQ éŸ³ä¹ã€‚

#### å‚æ•°ï¼š

| å‚æ•°     | å¿…éœ€          | è¯´æ˜                          |
|----------|---------------|-------------------------------|
| `mid`    | âœ…ï¼ˆäºŒé€‰ä¸€ï¼‰   | æ­Œæ›²çš„ Song MID               |
| `q`      | âœ…ï¼ˆäºŒé€‰ä¸€ï¼‰   | æœç´¢å…³é”®è¯ï¼Œæ ¼å¼ï¼š`æ­Œæ‰‹ - æ­Œæ›²å` |
| `album`  | âŒ            | ä¸“è¾‘åç§°ï¼Œç”¨äºç²¾ç¡®è¿‡æ»¤         |

> âš ï¸ `mid` å’Œ `q` è‡³å°‘æä¾›ä¸€ä¸ª

#### ç¤ºä¾‹ï¼š

##### æŒ‰ MID è·å–ï¼š

```bash
curl -H "X-API-Key: YOUR_SECRET_KEY" \
  "http://127.0.0.1:5000/api/qq?mid=002WCV372xJd69"
```

##### æŒ‰å…³é”®è¯æœç´¢ï¼š

```bash
curl -G -H "X-API-Key: YOUR_SECRET_KEY" \
  --data-urlencode "q=å‘¨æ°ä¼¦ - ç¨»é¦™" \
  "http://127.0.0.1:5000/api/qq"
```

---

### 3. ç½‘æ˜“äº‘éŸ³ä¹æœç´¢ `/api/netease`

**æ–¹æ³•**ï¼š`GET`  
**æè¿°**ï¼šé€šè¿‡æ­Œæ›² ID æˆ–å…³é”®è¯æœç´¢ç½‘æ˜“äº‘éŸ³ä¹ã€‚

#### å‚æ•°ï¼š

| å‚æ•°     | å¿…éœ€          | è¯´æ˜                          |
|----------|---------------|-------------------------------|
| `id`     | âœ…ï¼ˆäºŒé€‰ä¸€ï¼‰   | æ­Œæ›² ID                       |
| `q`      | âœ…ï¼ˆäºŒé€‰ä¸€ï¼‰   | æœç´¢å…³é”®è¯ï¼Œæ ¼å¼ï¼š`æ­Œæ‰‹ - æ­Œæ›²å` |
| `album`  | âŒ            | ä¸“è¾‘åç§°                      |
| `level`  | âŒ            | éŸ³è´¨ç­‰çº§ï¼Œé»˜è®¤ `lossless`<br>å¯é€‰ï¼š`standard`, `exhigh`, `lossless`, `hires` |

> âš ï¸ `id` å’Œ `q` è‡³å°‘æä¾›ä¸€ä¸ª

#### ç¤ºä¾‹ï¼š

##### æŒ‰ ID è·å–ï¼ˆæŒ‡å®šéŸ³è´¨ï¼‰ï¼š

```bash
curl -H "X-API-Key: YOUR_SECRET_KEY" \
  "http://127.0.0.1:5000/api/netease?id=191179&level=hires"
```

##### æŒ‰å…³é”®è¯ + ä¸“è¾‘æœç´¢ï¼š

```bash
curl -G -H "X-API-Key: YOUR_SECRET_KEY" \
  --data-urlencode "q=G.E.M.é‚“ç´«æ£‹ - é¾™å·é£" \
  --data-urlencode "album=T-Time" \
  "http://127.0.0.1:5000/api/netease"
```

